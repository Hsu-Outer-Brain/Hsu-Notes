# 双向复利
**什么叫作失败？**

**失败是到达较佳境地的第一步。** 

\-- 菲里浦斯

**本文将围绕指数和对数的 “可逆” 展开。** 

我的目的不是为了帮大家温习数学，而是探索以下重要且有趣的话题：

1、聪明的试错，是一个**逆向复利**的过程，它可以帮助我们以指数增长的速度，逆向逼近正确答案；  

2、绝大多数成就的取得，都是通过复利效应实现的。但是，复利很难。本文我将讲述**复利的双向测试**，为靠谱的复利搭建一个可计算的脚手架；  

3、**两头求极限**，才是马斯克的 “第一性原理” 中最重要但却被忽略的部分。

4、**凯利公式**给出了一个最大收益与下注比例之间的数学关系。该公式是在基于概率的**复利公式**的基础上，通过取对数然后求导得出的；  

5、既然说到了对数，自然要说一下**神奇的自然对数 e**，以及**自然增长的极限**。

以可感知的方式来重温**对数**，能帮助我们从底层理解这个世界的算法。

**log\*\***10**(\*\*\*\***10)\*\*

《鱿鱼游戏》中的第五关，是 “跳玻璃桥”。

有 16 位选手按照顺序过一条玻璃桥。玻璃桥由 18 节构成，每节有左右两块玻璃，一边是普通玻璃，一边是强化玻璃。

游戏规则是：参赛者必须正确分辨出普通玻璃和强化玻璃，若踩到普通玻璃就会当场摔死，一路踩到强化玻璃才能过关。

二选一，即使靠蒙，胜率也高达 50%。  

然而，虽然每一节的变化只有 2，两节的变化也就是 2✖️2，连续 18 节的变化是 2 的 18 次方，却高达 262144 种。

这是一个**指数级的增长**。

要想连续 18 次都蒙对，成功的概率是（2 的 18 次方）分之一，也就是约为 30 万分之一，约为死于从楼梯上摔下来概率的二分之一。

然而，在《鱿鱼游戏》里，最终有三个人过关，除了靠玻璃厂师傅肉眼辨别出来的较少环节，主要都是以人命为代价蒙出来的。  

理论上，如果人们不自相残杀，即使是靠蒙，活下来的人也应该多于三人。  

为什么一个成功率只有近三十万分之一的游戏，仅仅靠十几个人就能打通关呢？

因为这是 18 个串联在一起的二选一，18 个人用命去蒙，相当于一个**逆向的指数效应**，可以用非常有限的测试，来找到 262144 种可能性中唯一正确的可能性。

我称之为：**逆向复利**。  

如各位聪明读者都知道但可能早已忘记的数学，玻璃桥游戏的巨大不确定性（262144 种）是来自指数增长，而消除不确定性则是靠指数函数的反函数：

**对数函数。** 

\***\*log\*\***10**(\*\*\*\***100**)\*\*\*\***

先来玩儿一个简单游戏：

> 已知有两个抽屉，各有一黑一白两个盒子，一共四个。其中一个盒子里有颗大钻石，猜中了就归你。
>
> 你可以问任意问题，主持人必须回答，但只能说 “是” 或者“不是”。
>
> 请问你最少要问几次？

也许你在宿舍生活时，玩儿过类似的游戏：通过不断问问题，获得 “是或不是” 的反馈，然后一步步解出谜题。  

答案是你需要问两次：

第一次：是在左边的抽屉里吗？

（是，则左；不是，则右。）

第二次：是在黑色的盒子里吗？

（是，则黑；不是，则白。）

这是一个简化版的 “过玻璃桥” 游戏。

**有算法的瞎蒙，有时候并不蒙瞎。** 

近 300 年前，牧师贝叶斯设计了一个思想实验：

-   他背对一张桌子坐着，桌子上有个白球，他并不知道白球的位置。
-   然后，他让助手随机往桌面上扔黑球，黑球落在桌子上的位置完全是不确定的；
-   接下来，每放完一个，他就问助手白球相对于黑球的方位。比如，助手说白球在黑球的右边，他就猜也许白球在靠右一点儿的位置；
-   然后，助手又随手扔了一个黑球，并且告诉他这个白球是在黑球的左边。于是他更新了猜想，可能白球并没有那么靠右；
-   就这样，扔的黑球越多，他就越能逼近白球真正的位置。

这个 “无聊” 的游戏靠谱吗？

该实验中，仅用模糊的**相对关系**，就能逐步推断出结果。关于这一点，我会另外在一篇《逆风而行》（关于压力差和概率差）的文章中再谈及。  

事实上，贝叶斯的这个思想实验，是对休谟的因果怀疑论的反击。结果，产生了一种 “由果推因” 的逆概率计算，迄今仍在深刻改变这个世界。

也许你会觉得，这种瞎猜，要猜到什么时候？

和过玻璃桥一样，贝叶斯的计算，也有一种逆向的指数效应，能够快速逼近白球的真正位置。

\***\*log\*\***10**(\*\*\*\***1000**)\*\*\*\***

在过玻璃桥游戏里，每一节的变化是 2，连续 18 节的变化，就是 2 的 18 次方，这是一个指数运算。

计算结果，是 262144 种变化。

那么，如果我们只知道一共有 262144 种变化，但不知道玻璃桥有多少节，该如何计算呢？

这就是指数运算的逆运算：对数运算。

如果 a 的 x 次方等于 N（a>0，且 a≠1），那么数 x 叫做以 a 为底 N 的对数，记作 x=loga N。其中，a 叫做对数的底数，N 叫做真数。

对数的意思是： 用几个数与自己乘在一起会得到另一个数？

例如 2 的三次方是 8。那么反过来，多少个 2 相乘可以得到 8？

![](https://mmbiz.qpic.cn/mmbiz_png/SF9cpK1TBCgnxk4GdhCerpyWqvYklkVcwsW5notsibZeVtpL0LlMuaxJaW8FMDxntGkIMQWIl9Izs5bM7feKPUg/640?wx_fmt=png)

通过对数运算可知，log2(8)\\=3。

在过玻璃桥的游戏里，2 的 18 次方等于 262144，那么：log2 (262144)=18。

**指数运算**，能够迅速将一个数字变得非常大；

**对数运算**，能够迅速将一个数字变得非常小。

二者放在一起，是一种**双向的 “复利效应”**。

\***\*log\*\***10**(\*\*\*\***10000**)\*\*\*\***

关于不怕失败，主动试错，已经是老生常谈。

为什么要趁年轻犯错呢？什么是聪明的犯错呢？  

记得有位科学家说过：**所谓专家，就是在一个极小的范围内犯过了所有的错误。** 

以下图为例：

![](https://mmbiz.qpic.cn/mmbiz_jpg/SF9cpK1TBCh5UkicXZy7nAj7TOkXT6iaVgjyTmE3w1yUOdkJXOCJptkEJ9QibbwdpdECjELShV5z3zN8U6IhcR1Ng/640?wx_fmt=jpeg)

你要找寻图形中藏宝的小方块，即使你只能像过玻璃桥那样去试，一次猜一半，你也会以非常快的速度逼近宝藏。

但是，要有以下前提：

**1、有边界。** 即使逆向的指数效应很强大，但也很难解决没有边界的问题；

**2、有算法。** 例如过玻璃桥看似残酷，但其实是由一连串二选一的问题组成，数学上可以计算，能够不断逼近答案；

**3、有反馈。** 猜对玻璃，活命；猜错玻璃，死掉。但是对于整个系统而言，假如只是一个游戏（并不是真的死掉），其实猜对或者猜错，就信息的传递而言，是等价的；

**4、能遍历。** 参与游戏的人不仅要犯掉所有的错误，还要能够在犯错之后活下来。对创业者而言就是在钱花光之前快速犯错然后找到活路。

可口可乐公司的 CEO 詹姆斯. 昆西说：“如果我们不犯错，那就表明我们工作上都不够努力。”

奈飞的哈斯廷斯认为：“我们必须要冒更多的风险…… 去尝试更疯狂的事情……。”（本月 22 日，奈飞一夜之间市值蒸发 3100 亿。）

贝佐斯将极可能是错误的 “大胆押注” 视为实验品：

> “既然它们是一次实验，那么你肯定就不能提前知道它们会产生怎样的作用。毕竟实验究其本身来讲就是一件容易失败的事儿。但只要有几个巨大的成功就能弥补你所经历的无数次的失败。”

然而，所谓 “失败是成功之母”，在我们这个演化的世界里，对绝大多数人而言并不成立。  

即使你勇于失败，不断探索，假如你的犯错不够聪明，不够随机，运气不够好，成功照样不会来临。

**聪明而主动的犯错，需要有边界、有算法、有反馈、能遍历，也需要一些疯狂、随机和冗余。** 

哈耶克说：

> 虽然进化经常被总结成 “适者生存”，但推动进化进程的却往往是不适者。尽管我们总是本能地以为复杂问题需要精心设计的解决方法，但进化却毫无规划可言。
>
> 复杂得惊人的事物是在简单的过程中涌现出来的：尝试已有事物的不同版本，剔除失败，复制成功经验。

所以，成功学最大的问题是，忽略了那些事后不再发声的失败要素，简化了因果，甚至颠倒了因果，并且认为成功可以被设计，被简单复制。  

\***\*log10(100000)\*\***

对于人们热衷于探寻模式和设计因果，哈耶克批评道：

> 人们总以为自己能设计出这样或那样的东西，但实际上，他们对要设计的东西几乎一无所知，经济学的独特职责就是展示人们的这种无知。

哈耶克的这句话，尤其适合应用于教育领域。  

教育的目的和意义到底是什么？

以前是为了培养技能，可以上生产线纺纱造车。现在早变了，漫长的求学生涯，是人类社会的一种冗余机制。

对一个孩子而言，在被保护的童年与青少年期间，低成本地去犯人生当中所有可能的错误，也许是最有价值的。

所以，如哈耶克所言，教育应该允许孩子通过犯错，暴露出自己的无知，自己的愚蠢。

可事实呢？犯错、无知，是学校里最无法容忍的。

于是，可笑的事情出现了：一个人经历了十几年的教育，不断追求如何将这辈子几乎都不会再用上的知识做到 “不出错”，不断地将那些严丝合缝的因果关系背得烂熟，最宝贵的个性因为无法显现而被磨灭，无价的多样性被统一的生产线加工成一个模子。

可是，我们眼前复杂的现实世界，越来越像休谟在几百年前所说的：

**“我们无从得知因果之间的关系，只能得知某些事物总是会关联在一起。”**

产生于工业革命年代的传统教育，早已无法应对非线性的、不确定的当下。

如果传授确定性知识的教育只是成为一个智力测试系统，以摧毁人才的方式来选拔人才，那么这一代价对社会、对个体而言都太昂贵了。

某女子学校创建了一个名为 “失败” 的项目。负责人雷切尔 · 西蒙斯说了一句非常贝叶斯主义的话:  

**“我们想要告诉大家的是，\*\***失败并不是学习过程中犯的错误，而是学习过程中的特征。\*\* **”**

教育教会我们学习和思考（指数式增长），更是教会我们如何挖掘自己独一无二的宝藏（对数式逼近）。

大自然实现了某种有算法的随机性，学校也应该如此。

所谓因材施教，不是定制名表，定制名包，而是提供一个**有算法的系统**，并且通过**模拟真实的现实世界**，让孩子自由探索，大胆犯错，无所顾忌地暴露自己的无知，呈现自己的天性，从而发现自己的禀赋，点燃愿意终其一生去努力的理想。

接下来，我要通过可逆的指数和对数运算，讲到复利的双向测试。

\***\*log\*\***10**(\*\*\*\***1000000**)\*\*\*\***

“奇怪” 的是，对数的发明先于现代指数。原因是对数当时在航海与天文学领域太实用了。

对数可以将**高级运算**降为**次级运算**，例如化乘方开方为乘除，化乘除为加减，从而极大降低了运算量。

指数和对数互为 “反函数”，二者之间是可逆的关系。

先看从指数到对数：

![](https://mmbiz.qpic.cn/mmbiz_png/SF9cpK1TBCh5UkicXZy7nAj7TOkXT6iaVgtKb4c6LicC7I2ewicR89Xq1FtTujsc6AJ4rNIq7JKcYqYBGfd55WkUlg/640?wx_fmt=png)

我们把 k 输入到上面的运算器，经过指数运算，得到 a 的 k 次方，再代入对数运算，又输出了 k。

再倒过来，看从对数到指数，一样是输入 K，输出 k。

![](https://mmbiz.qpic.cn/mmbiz_png/SF9cpK1TBCh5UkicXZy7nAj7TOkXT6iaVgYVhq6IjG6gXLfx6KPr5zowibWo09v1XbATqgGIYLRl5SRFEGeYawpSw/640?wx_fmt=png)

如上运算器，我们可以从左边输入，右边输出；也可以从右边输入，左边输出。

就像贝叶斯提出的逆概率，从而实现了可以 “由果推因”，如上的双向运算，既是由因推果，又是由果推因。  

这种方法，可以帮助我们检验自己的信念。  

例如，假如你看到：  

某人非常聪明并且努力，所以在房地产行业赚到了很多钱。

你就可以做一个双向测试：  

-   从 “非常聪明并且努力”，可以推出“在房地产行业赚到很多钱” 吗？
-   从 “在房地产行业赚到很多钱”，可以推出“非常聪明并且努力” 吗？

如果不能，我们可能需要重新定义自己的那个信念。（这仅仅是个未必完备的思考实验。）

以下我要讲的，绝非用公式包装成功学，而是分享一个有趣的 “感知”。

我相信，如果你懂得创业，又懂指数和对数，一定能对如下内容会心一笑。

先定义一下，**世俗意义上的成功，大多是通过大规模复制实现的**。

企业复制产品，个人复制 IP，基因复制生命。

**成功的复制，就是将某样有价值的事物重复足够多次，从而实现复利。** 

越厉害的复制，越是有**指数效应**，并且**边际成本递减**，还能形成**网络效应**。

那么，复制什么呢？

在指数运算里，复制的是底数。例如，2 的 18 次方是 262144，其中底数是 2，指数是 18。

回到创业。

众所周知的精益创业，其核心思想是，先在市场中投入一个极简的原型产品，然后通过不断的学习和有价值的用户反馈，对产品进行快速迭代优化，以期适应市场。

精益创业的三个主要工具是：“最小可用品”、“客户反馈”、“快速迭代”。 

在大规模复制之前，创业者必须以最小的成本和有效的方式验证产品是否符合用户需求，在最短时间里找到有价值的认知。

快速地去蒙，聪明地去试错，就像贝叶斯身后乱扔的球，以及过玻璃桥的大胆一跃。

这个有价值的认知，就是指数运算和对数运算中的底数。

-   创业的第一阶段，从 0 到 0.1 或者从 0 到 1，像是一个**对数运算**；
-   在经过验证和迭代后，再实现爆发式增长。像是一个**指数运算**。

阿里云总裁认为技术只有两个核心价值：

**第一、对于验证成功或接近成熟的业务，快速规模化，实现指数增长。** 

比如从 1-10 用了 10 天，那你从 10-100 应该只用两天或一天。  

**第二、要帮业务团队快速试错。** 

让产品快速上线，别在乎什么架构，有反馈才知道这个业务行不行，能不能活下来。

所以，创业的过程，交织着对数运算和指数运算。我们需要从两头分别输入数字，往返测试，以求发现内核，然后进行大规模复制。

一头计算作为复制内核的底数（对数函数是求指数而非底数），一头计算指数增长的规模。

我在《人生算法》里，将此拓展到个人的演化：

-   上半场，是一个切割钻石的过程，目的就是为了不断找到真正属于你自己的最小的那个内核。
-   下半场，就是如何通过复制，令最小的内核最大化。

为什么要用 “最小内核” 来做指数运算的底数？

复利增长的关键是复制的连续性和稳定性，物理意义上去掉多余的部位，信息意义上去除噪音，能够令最小内核的复制更可持续。

这个过程，总是伴随着打破和重建。新晋导演章子怡认为，导演就是一个 “打破瓶子” 的过程：“你得把瓶子打碎了，钻出来透口气，再钻进另一个瓶子里。”

正如演化算法的三部曲：变异，选择，复制。  

变异是某个认知，这个认知以某个最小化产品的形式被放在具体环境里，通过与环境的双向选择而不断迭代，一旦其生存模式被验证，就大规模复制。  

一个人，或者一个机构，其成功的最大秘密是：找到可大规模复制（具有连续性）的 “大概率事件 “。

**log\*\***10**(\*\*\*\***10000000**)\*\***

事实上，马斯克总是提及的第一性原理，也包含了类似的双向推导。

先前，人们对 “第一性原理” 的理解主要是：

**把一些事情归结为最基本的原则，尤其是物理定律，少一点儿类比，少一点儿夹层解释。** 

但其实不止于此。  

马斯克说，另一个方法是：

**在极限中思考问题。** 

如果你在思考一件事情的同时，把它扩展到一个非常大的范畴或一个非常小的范畴，事情会发生什么变化？

举个例子，不管是造电动车还是火箭，假如零件太贵，成本太高，你就可以想：

-   如果每年的产量是一百万台呢？那还贵吗？
-   如果一年一百万台还是很贵，那么数量就不是你的东西贵的原因，根本问题出在设计上。
-   这样一来必须改变设计，改变零部件，从根本解决价格问题。

这个，是从规模极限去推导。  

然后，倒过来，从基本单元的极限去推导，一直到原子层面。

例如生产火箭，一直拆解到初始的资源和原料：

-   如果你看一下火箭的原材料，你会发现原料有铝、钢、钛合金、特种合金、铜等；
-   每个部件的组成元素的重量是多少，原材料价值是多少？
-   在不改变原材料的情况下，以上几个问题为火箭的成本设定了渐近极限。
-   更进一步，把原子排列成最终的形状，这将是你产品的最低成本。

在马斯克看来，产品的制造成本渐进式地接近其原材料价值。

所以，关于产品的第一性原理是：

**尝试想象完美产品或技术，不管它是什么。然后思考：原子怎样才能完美地排列？进而找出如何获得这种形状的物品。** 

但是，大多数时候，人们停留在 “夹层”。从观念上固守已有的东西，倾向于使用他们熟悉的工具和方法。

马斯克的思考方式是，通过双向推导：

-   我们一方面可以去发现规模效应下的完美产品（指数运算）；
-   一方面去创造工具、方法，找寻材料，从原子层面构建基本单元（对数运算）。

**从因到果，再从果到因，双向推导至极限，会创造出惊人的奇迹。** 

**log\*\***10**(\*\*\*\***100000000**)\*\***

在《鱿鱼游戏》中的第五关 “跳玻璃桥”，一个人向前跳，不管他踩中了钢化玻璃，还是不幸踩碎普通玻璃，都为团队提供了信息。  

**这种信息，是通过消除不确定性来实现的。** 

就信息本身而言，“正确”或者 “错误”，是等价的。不同的是，“正确” 的人有机会再去踩下一关的玻璃。

那么，该如何度量信息呢？  

香农引入了 “比特” 的概念。  

比特来自二进制，香农认为可能拥有的最简单的信源，就是抛硬币，正或反，是或否，1 或 0，这是可能存在的最基本的信息。  

就像信息的原子。

> 比特是在两个等概率的可能性之中进行选择后所产生的信息量。
>
> 所以 “一台拥有两种稳定状态的设备…… 能够存储 1 比特信息”。

回到开始的猜钻石游戏，你需要多少信息？

-   在左右抽屉里二选一，对应 1 比特；
-   再在黑白盒子里二选一，对应 1 比特；

所以你总共需要 2 比特，以实现在四个盒子里选出一个。

玻璃桥游戏里，总变化高达 262144 种可能性，但因为这是 18 个串联在一起的二选一，我们算一下需要多少信息：

也就是计算 262144 以 2 为底的对数：log2262144=18，相当于 2 的 18 次方的逆运算。

为什么计算对数？

因为：采用概率分布的对数作为信息的量度具有可加性。

由于求对数，所以有一种**逆向的指数效应。** 其所产生的加速效应，我称之为**逆向复利**。  

过玻璃桥的变化虽然很多，但信息只有 18 比特。

那么，每跳一个人，不管是否掉下去（就像抛硬币无论正反面，获取的信息是一样的），就获得了 1 比特。  

当然，如果没掉下去，就又多了一次下一轮的测试机会。  

由此，每跳一次，就获得了一个信息，也就消除了一部分不确定性。教科书对此的描述是：

![](https://mmbiz.qpic.cn/mmbiz_png/SF9cpK1TBCgWwvHBQq5BjTBEw3WSULUVK4bGZuSke7XrdibGlEEjGXAkryt0kBaCMCaZSibLFgKg7tcUHrctaK1g/640?wx_fmt=png)

香农将热力学的熵，引入到信息论，因此它又被称为香农熵，或信息熵。

在信息论里面，熵是对不确定性的测量。

在信息世界，熵越高，则能传输越多的信息，熵越低，则意味着传输的信息越少。其公式如下：

![](https://mmbiz.qpic.cn/mmbiz_png/SF9cpK1TBCgWwvHBQq5BjTBEw3WSULUVyC2TBbTe1sgjibZ6ricHqUNEEqjE340gPBa8trPRcdnwO6SicO6tYl7pg/640?wx_fmt=png)

其中 p（xi）代表随机事件 X 为 xi 的概率。

还是以扔硬币为例。

扔一次硬币，出现正面的概率是 p1=0.5, 出现反面的概率也是 p2=0.5。

所以，根据公式计算：

H = -(0.5✖️log2(0.5) + 0.5 ✖️log2(0.5)) = 1 比特

但是，如果这枚硬币被做了手脚，出现正面的概率是 0.7, 反面是 0.3。那么 “扔一次这个硬币” 这个事件的信息熵是多少呢？计算如下：

H= -(0.7✖️log2(0.7) + 0.3✖️log2(0.3)) = 0.88 比特

假如你去玩抛硬币的游戏，而且你知道有一桌的硬币做了手脚，正面概率是 70%，那么你一定会选这一桌，并且每次都押正面，因为其信息熵更低，这意味着该 “不确定性” 比公平的硬币降低了。

在《鱿鱼游戏》里，那位玻璃厂的老师傅，就是靠自己的专业，降低了自己每一次蒙的行为的信息熵，就像上面那个做了手脚的硬币。

因此，他消除不确定性的 “能力” 更强。

**log\*\***10**(\*\*\*\***1000000000**)\*\***

再说回复利的主题。

复利的基本公式，是一个指数运算。

![](https://mmbiz.qpic.cn/mmbiz_png/SF9cpK1TBCh5UkicXZy7nAj7TOkXT6iaVgjFKhX6uKJzTo7wLxc6KHeibVfb8xKBSDg3hBicfShtR3hZl5CpicQfYAA/640?wx_fmt=png)

复利算起来很简单，实现很难，原因见《[复利的谎言](http://mp.weixin.qq.com/s?__biz=MjM5ODAyMjg3Ng==&mid=2650754872&idx=1&sn=ef9af6415149788b3142465224e922ba&chksm=bedaf48b89ad7d9d45a7cf2a4b7d4f95d07990e711c9fe545834cc5c1ef462c0934b16d05c11&scene=21#wechat_redirect)》：

-   真相 1、**世界被随机性主宰；**
-   真相 2、**连续性很难实现；**
-   真相 3、**现实是不均匀的；**
-   真相 4、**回报是不对称的；**
-   真相 5、**筹码是有限的。** 

用复利公式来描述以上几点就是：

1、利率 r（回报）与期数 n 都是说不准的；

2、比较好的回报 r，期数 n 总是不长久；

3、利率 r（回报）总是起起伏伏，时好时坏；

4、现值 PV（投入本金）大，终值 FV（最终收益）未必大；

5、以总值论，本金太小。以比例论，本金撑不到赚钱的时刻。

那么，复利公式还有用吗？

在充满不确定性的现实世界，用概率来描述一个事件，是理性且智慧的。  

复利公式也不例外。

确定性下的复利公式是：

![](https://mmbiz.qpic.cn/mmbiz_png/SF9cpK1TBCh5UkicXZy7nAj7TOkXT6iaVgeUFOrTpYkiarH6ufkHviafvs2haJ8LhL2XybQ2tjHgxEYZ3pktk7oFUA/640?wx_fmt=png)

但是，现实世界的回报 r 并不确定，那么我们用概率来描述。  

举例：若一投资有 60% 的获胜率（p = 0.6，q = 0.4），而投资者在赢得赌局时，可获得一赔一的赔率（b = 1）。为了避免爆掉，所以下注者每次会控制下注比例，假设是 x，那么连续下注 n 次，期望值计算是：

**f(x)=(1+x)^(n\*\***✖️\***\*0.6)✖️(1-x)^(n✖️0.4)**

如上，这其实是一个概率世界的复利公式。

首先，这里仍然有一个重要前提：期望值为正。否则就是赌博。

这时，我们会发现，下注比例 x 太小，赚不到钱；x 太大，可能会爆掉，以致无法实现遍历性而 “享用” 正期望值。

有没有一个方法，可以控制 x 的数值，就像用开关控制水量一下，调节每次下注的比例，在确保不会爆仓的前提下实现收益最大化？

转化为数学问题，就是求上面 f(x) 的极大值。

当年索普向香农请教期望值优势下的下注比例问题，香农向他推荐了自己同事凯利的一个公式。  

与索普自己的信息熵公式有点儿像，凯利公式是对概率世界的复利公式取对数，然后求极值。  

凯利公式的目标是：最大化资产的增长率，也即最大化**对数资产的期望值**。

设开始时的资产是 1，每次下注的比例为 f，有 p 的概率会以 b 的赔率赢钱，资产的对数期望值计算如下（就是**对概率下的复利公式两边取对数**的结果）：

![](https://mmbiz.qpic.cn/mmbiz_png/SF9cpK1TBCh5UkicXZy7nAj7TOkXT6iaVggCF7GqlNQiaB3TdKvMUvhiaVYk7VOdxzQ9sUG1yETWvGcpicDUyA9ibqLQ/640?wx_fmt=png)

要找到最大化这个期望值 f，只需 E 对 f 的导数值为零：

![](https://mmbiz.qpic.cn/mmbiz_png/SF9cpK1TBCh5UkicXZy7nAj7TOkXT6iaVgmF8Hic8whCsPgic6tXiaWlLvqpMibic6AbvHBj9d8FZ6GdBJc2Ahupl6FHg/640?wx_fmt=png)

求解上述方程，得出凯利公式：

![](https://mmbiz.qpic.cn/mmbiz_png/SF9cpK1TBCh5UkicXZy7nAj7TOkXT6iaVgmiccuBVgAfspR2YV0UOjOkwKt0402MFicM7hRC7FoGKOqLS8bOtudXaA/640?wx_fmt=png)

用图形，更容易看出凯利公式的工作原理：

![](https://mmbiz.qpic.cn/mmbiz_png/SF9cpK1TBCh5UkicXZy7nAj7TOkXT6iaVgsJTeyMxLbxGyfMiaiciaTYia76yD9kCWbQibaYgVyBic4TILg1KG34L1wGRw/640?wx_fmt=png)

横坐标是下注比例，纵坐标是回报。下注小，安全但回报低；下注大，极可能回报也不高风险却很大。

凯利公式帮助我们找到图中的峰顶，对应的就是最佳下注比例。

人的一生，是由很多个下注串起来的。虽然不像过玻璃桥那么非死即活，但一样充满了巨大的不确定性。

每次做决策时，计算一下输赢的概率，算一下回报，并且随时提醒自己控制好下注的水龙头，千万别 All in。

凯利公式的工作原理图最上方的那个点**，也许是我们想在人生中找寻的位置：** **活下来，活好 \*\***。\*\* 

**log\*\***10**(\*\*\*\***10000000000**)\*\***

如上所述，对数与复利式的增长有关。

假设我们往银行存 1 个亿，银行的年息是 100%，如果每年产生一次，那我们可以知道一年到头你的账户总额（单位：亿元）是：

![](https://mmbiz.qpic.cn/mmbiz_png/SF9cpK1TBCh5UkicXZy7nAj7TOkXT6iaVgDwnYD7iaHGzaaQMElqNjuAYS6wqicAQiaMUL2bAsl8xxdsw2XLmw6ar1w/640?wx_fmt=png)

但是如果我们换成一个月产生一次利息，然后你又把每个月的利息重新存入本金，那你一年到头的账户总额是：

![](https://mmbiz.qpic.cn/mmbiz_png/SF9cpK1TBCh5UkicXZy7nAj7TOkXT6iaVgk7WW096YLm4W9gkmsQaWKAnfTUnoYc2fUcUmlPxHq0oriaMWdib8ncEw/640?wx_fmt=png)

进一步，我们换成一个天产生一次利息，然后你把每天的利息重新存入本金，那你一年到头的账户总额是：

![](https://mmbiz.qpic.cn/mmbiz_png/SF9cpK1TBCh5UkicXZy7nAj7TOkXT6iaVgeGT5yMeGtNxcPDbd7Lf8jv0NqYsqso7tbm4ia0KLOsMOgHibfMd3UkHQ/640?wx_fmt=png)

假设银行愿意每秒付利息，你也每秒取出利息再存入，利滚利会不会涨上天呢？

并不会，你的银行余额是 2.7182817813 元。

所以，1 元钱存 1 年，在年利率 100% 情况下，无论怎么利滚利，其余额总有一个无法突破的天花板，这个天花板就是 e≈2.71828…。

e，作为数学常数，是自然对数函数的底数，亦称自然常数、自然底数，或是欧拉数。

在谷歌 2004 年的首次公开募股，集资额不是通常的整数，而是 $2,718,281,828，正是来自 e。其 2005 年的一次公开募股中，集资额是 $14,159,265，与圆周率有关。

e 和π，的确是两个最神奇的数字了。

e 的本质，是自然增长的极限。  

e 在自然界无处不在，最有名的是**等角螺线**，又叫**对数螺线**或**生长螺线。** 

例如：

![](https://mmbiz.qpic.cn/mmbiz_png/SF9cpK1TBChfGC9lQEiaBRvjhbvTQdxtLEs0YxnbJkNpn8bnOVTNZiagme2V73ALxfAgrmyJl1xmTh7xpibZGCCRA/640?wx_fmt=png)

还有：

-   昆虫以等角螺线的方式接近光源；
-   蜘蛛网的构造与等角螺线相似；
-   旋涡星系的旋臂差不多是等角螺线。银河系的四大旋臂的倾斜度约为 12°；
-   低气压 (热带气旋、温带气旋等) 的外观像等角螺线。

雅各布 · 伯努利格外喜欢等角螺线。他发现了等角螺线经过各种适当的变换之后仍是等角螺线，并对此十分惊叹和欣赏。

-   放大和缩小后的对数螺线，和原图形相似。
-   还有旋转的自相似性：旋转后的对数螺线，和原图形相似。

于是，雅各布 · 伯努利要求将等角螺线刻在自己的墓碑上，并附词：

**纵使改变，依然故我。** 
 [https://mp.weixin.qq.com/s/N5ab0coDxEnE23DuRMy0TA](https://mp.weixin.qq.com/s/N5ab0coDxEnE23DuRMy0TA)
