# 从自动控制理论到信贷风控系统 - 知乎
## 前言

最近几年，大家都在讨论 "智能风控"。控制论的思想和方法已经渗透到了几乎所有的自然科学和社会科学领域，具有普适意义。笔者在大学 7 年的自动化学科中学习了一些自动控制理论，毕业后又从事了几年的信贷风控行业。对比发现这两者之间存在相通之处。因此，在本文中尝试从自动控制视角来分析信贷风控系统的特点。站在一个宏观的系统层面，往往可以发现其朴素、也更为本质的思想。

![](https://pic4.zhimg.com/v2-0780ba09a1cbfbf1c64b8aeb107f0467_b.jpg)

> 目录  
> Part 1. 信贷风控系统  
> Part 2. 负反馈控制  
> Part 3. 前馈控制  
> Part 4. 自适应控制  
> Part 5. 总结  
> 致谢  
> 版权声明  
> 参考资料

## Part 1. 信贷风控系统

### 风控流程

信贷风控系统大致可分为贷前、贷中、贷后三个阶段。贷前授信审批阶段，主要包括准入、反欺诈等常见拒绝策略，并对授信通过客户给予额度、定价策略。贷中交易审批阶段，主要包括准入、反欺诈等拒绝策略。贷中又需要对存量客户进行经营，包括睡眠唤醒、额度管理、交叉销售等。当放款后，我们又要监控客户的还款行为，对高风险客户提前入催；对已经逾期的客户，在不同阶段采用不同的催收手段，提高回款率。可以看到，信贷风控流程是一个**串行结构，环节较多，链路较长**。

为什么要分这么多环节呢？原因有二。

其一，**产品设计上的多阶段性**。例如，循环授信产品是先授信后动支，这将客户行为自然分为多个阶段。每个阶段客户的风险可能发生变化，故而对不同阶段都要做风险管理。

其二，**每一环节的侧重点不同**。例如准入是判断客户是否满足产品面向人群、政策法规等；反欺诈是拦截欺诈客户，为节省成本，也会先用内部黑名单，再用外部黑名单。

![](https://pic3.zhimg.com/v2-de4469d6c94eb0dfbf251f02dc378882_b.jpg)

图 1 - 信贷风控流程图

### 风控规则

风控的本质是剔除坏人，保留好人。因此，类似于自来水厂过滤杂质得到纯净水，其从结果上体现**就是以损失一定的流量作为代价，来换取通过流量的纯净性**。信贷风控中常见的指标就是通过率和逾期率，**通过率表示阀门拧得有多紧，而逾期率表示通过流量有多纯净**。

风控规则是由若干变量所组成的 IF-ELSE 关系集。其变量包括模型评分、黑名单、其他变量等。如何挖掘规则是风控策略人员每天工作中最为常见的问题。由于好坏并非绝对，且会相互转化，因此风控规则需要结合实际情况作出调整。

![](https://pic1.zhimg.com/v2-925feb3bfa63506f004e2e49e91cbe10_b.jpg)

图 2 - 风控规则作用前后的示意

由于不同团队（如贷前、贷中、反欺诈等）在不同时点上线了若干规则，久而久之，生产环境中可能运行着大量的规则。这些规则之间存在相互重复又有互相补充的部分，如图 3 中的韦恩图，3 条规则之间有公共部分，其覆盖的最终面积代表着拒绝人群，反之则是通过客群。当线上规则臃肿的时候，如何重构规则成了最大的困难，因为没人敢轻易动，没人有信心完全清楚拆掉某条规则后的影响。引用一句话 "代码和你，有一个能跑就行"。为此，在做置换（swap）操作时，我们可以考虑在拒贷模块后面再加一个回捞模块，回捞模块本质是对前者决策的否决。

![](https://pic1.zhimg.com/v2-6575c5293765451052fa6efbacd9dbd0_b.jpg)

图 3 - 风控规则组成的韦恩图

### 信贷系统

了解控制对象的特性对于我们设计控制系统来说非常重要。信贷系统在运行中具有几个特征，如下表所示。因此，我们会发现信贷系统风险控制确实是一个难题。正因为信贷系统的高滞后性，在信贷风控系统中，我们才对决策的稳定性提出了要求。虽然通过率是立竿见影的，但风险是严重滞后的。每一次策略调整，都有较长的风险表现周期，如果频繁调整则很难分析清楚影响。

| 特征   | 解释                                                                                                      |
| ---- | ------------------------------------------------------------------------------------------------------- |
| 高滞后性 | 分期还款产品第一期还款日是放款后 30 天，才能观察到资产的首逾风险。这就存在 30 天的滞后。以此类推，越是关注长期风险，滞后期越长。因此，短期限信贷产品风险相对于长期限更容易控制，其风险反馈更快。    |
| 多干扰项 | 金融监管政策（业务、数据）、外部市场环境、用户客群等因素一直在发生扰动。例如：P2P 行业清退、联合贷款政策、数据安全法、24 定价限制等等。                                 |
| 难测量性 | 数据监管政策、采集原因等导致很多测量误差。例如，任何多头数据商都无法覆盖所有的金融机构，导致很多决策都只是依赖于当前可测量的数据下进行，可能并不能完全反映客户的真实情况。在小微贷款中，数据缺失现象更为严重。 |
| 可解释性 | 国外信贷监管要求决策要可透明，对拒贷规则必须要有明确的原因。这就限制了一些黑盒的机器学习、深度学习模型的使用，而会尽可能使用 LR 评分卡模型，便于从 Reason Code 上归因。            |

## Part 2. 负反馈控制

负反馈控制（Feedback Control）的特点是当被控变量出现偏差后才进行调节；哪怕干扰已经发生，但并没有产生偏差，那么控制器也不会工作。因此，负反馈控制方式的调节作用将永远滞后于干扰。

![](https://pic1.zhimg.com/v2-67216b52d71987a7149eea51f22791e4_b.jpg)

图 4 - 反馈控制系统

如图 4 所示，典型的闭环控制系统具有几个基本要素，相关解释说明如下表所示。

| 控制系统 | 解释                                               |
| ---- | ------------------------------------------------ |
| 目标值  | 人们希望被控变量能达到的数值，又称输入、给定值等。                        |
| 比较器  | 属于控制器的一部分，将输入量与反馈量计算偏差。                          |
| 控制器  | 使被控对象具有期望性能或状态的控制设备。根据偏差，按预先设计好的控制规律给出控制量输出到执行器。 |
| 执行器  | 执行来自控制器的指令，并将控制作用施加于被控对象，以使被控变量按照预期的控制规律变化。      |
| 被控对象 | 指被控制的设备、物体、系统等。                                  |
| 干扰因素 | 包括内在因素（如设备老化）、外在因素（如环境）。                         |
| 被控变量 | 被控对象的输出，表征了对象或过程的状态、性能。                          |
| 传感器  | 用以检测被控对象的性能指标，将信号将传送控制器，与设定值进行比较。                |

如图 5 所示，这是化工行业中常见的换热器闭环反馈控制方案。换热器的工作原理是，通过控制蒸汽阀门大小实现蒸汽流量调整，使得工艺介质加热到目标温度。在闭环控制系统中，化工仪表将测量工艺介质的实际温度 T2（反馈量），并将信号反馈到控制器 TC 处，控制器将会比较实际温度 T2 与目标温度 T1 的差异，发出控制信号作用于阀门（执行器）。当实际温度 T2 偏高时，控制器将调小阀门，减少蒸汽流量从而实现降温，反之则调大阀门。这个系统中存在的干扰量包括工艺介质原始温度 T1、流量大小 Rf、成分 Cp、外部环境温度的波动等。

![](https://pic2.zhimg.com/v2-5c7df0ffb4dd4204f77de23fe71fbf99_b.jpg)

图 5 - 换热器的反馈控制方案

在上述调整过程中，我们可能会观察到实际温度 T2 可能会产生以下响应曲线。可以看到，**化工过程中普遍存在着滞后性**，输出信号存在着振荡，最终趋于稳定，但仍然与目标信号存在着稳态误差。因此，系统存在着时间滞后性是常态，而从观测到做出反应又存在一些滞后。

![](https://pic2.zhimg.com/v2-a0745fcb8b2b19f7fc4efd0fcbaea971_b.jpg)

图 6 - 系统输出响应曲线

以化工过程控制场景为例，在理解基本的闭环控制原理后，我们切换回信贷风控场景。闭环控制系统中各要素与信贷风控系统的对应关系，如下表所示：

| 闭环控制系统 | 化工控制系统            | 信贷风控系统              |
| ------ | ----------------- | ------------------- |
| 目标值    | 温度、压力、液位、流量、成分等   | 通过率、逾期率（风险）、资产余额等   |
| 比较器    | PID 控制器等          | 风控策略人员              |
| 控制器    | PID 控制器等          | 决策引擎                |
| 执行器    | 阀门、水电等            | 风控流程、风控规则集、模型分数等    |
| 被控对象   | 化工设备（换热器、精馏塔等）    | 资产包                 |
| 干扰因素   | 环境、设备老化等          | 监管政策、市场环境、客群波动等     |
| 被控变量   | 温度、压力、液位、流量、成分等   | 通过率、逾期率（风险）         |
| 传感器    | 化工仪表（温度、压力、液位等指标） | 监控报表（如通过率、风险逾期率等指标） |

当然，两个系统存在明显差异的地方在于，化工过程系统存在大量非线性、连续性，但可通过加大量的检测仪表实现对设备过程的监控，而**信贷风控系统的离散性更强，很多干扰因素无法量化**。

目前信贷风控系统中的核心控制器仍然依赖于人，人需要去每天监控观察资产质量，和预期或历史指标比较，当发现有异常事件时则做出决策调整，紧急上线策略补丁。例如，某数据商下线，则需要梳理目前规则集和模型中是否用到了该数据源，重构规则并测算上线；当市场环境趋于恶化，则要提前收紧策略，规避行业风险。

![](https://pic4.zhimg.com/v2-b96ae513c7cb503688fd5e8bd5a64e63_b.jpg)

图 7 - 信贷资产的闭环风控系统

在《[模型视角下的风控策略规则发现](https://zhuanlan.zhihu.com/p/141287611)》中，我们介绍了基于贷后风险表现来迭代风控策略规则的方法，包括画格子法、决策树法等。这是一种典型的负反馈机制。贷后表现相当于当前资产的风险浓度，经过检测后，我们发现当前风控系统仍然存在漏洞，因此可从中提取规则来打上补丁。可以说，这个优化的没有止境的，因为好坏并非绝对对立，其相互之间可能存在转化。例如，某个客户之前信用一直很好，但由于未来某个时点遇到了不可抗力导致没有固定收入，从而无法还债。

由于信贷系统存在着高度滞后性，单纯依赖于负反馈的风控系统是不够完美的，其很大程度依赖于历史数据，**对于风险的感知响应不够迅速**。从事这个行业越久，就越能感受到，**风控绝不是单一的模型或者策略所决定的，其是一个系统工程，其依赖于文化氛围、基础建设、人员经验等诸多因素**。

一家机构的风控系统响应速度越快，就越能在市场中占据优势地位。试想，当有一个行业风险出现时，时间就是生命，如果某家机构从发现风险到上线响应的周期越长，其很可能成为风险的低洼聚集地。在互金行业，客群大多是以贷养贷的，只要行业有风吹草动，客户无法借出新钱而失去还款能力，这种风险将会快速传播。

天下武功，唯快不破。这种 "快" 体现在文化氛围、基础建设、人员经验、团队建设等多个维度。

（1）**文化氛围**。一家公司若有强烈的敬畏风险意识，倡导风险至上的文化氛围，则能大大降低系统风险。这是因为，目前风控系统的迭代优化仍然大量依赖人力，对人的管理具有重要影响。同时，若跨部门之间有着良好的协作机制，则能很大程度上推进项目快速上线，减少因为部门沟通隔阂的延误问题。

（2）**基础建设**。传统信用评分机构（如 FICO）的模型开发周期很长，其对模型变量和结构做了很多分析论证，确保模型足够稳定；在国内，互金公司的打法则是 "短平快"，即**加快模型迭代速度，一旦模型有一些衰减就迅速迭代**，这也帮助很多互金公司抢占了市场份额。而国内很多互金公司的基础建设差异很大，有的能实现模型开发到上线只需要 1~2 周，有的却要大半年。

（3）**人员经验**。风控人员经验越足，通常意味着对风险敏感度越高，能预见萌芽的风险从而提前做出响应。另一方面，岗位切分越细，大家注意力更为关注，这也是一个优势。很多大公司风控做得好，有一个原因就是资深专家多，岗位细分。

## Part 3. 前馈控制

前馈控制（Feedforward Control）是指通过提前收集信息，预计未来可能出现的问题，提前采取相应措施，将可能发生的偏差消除在萌芽中。因此，其使用的调节器是**根据被控对象的特点来确定调节规律**。 与反馈控制相比，前馈控制在理论上可以做到完全补偿，在可测扰动产生作用的时候，用方向相反、幅度相同的控制作用进行抵消。但反馈控制必须要等到偏差出现，才能开始反应、有所动作。反馈是本质被动的，所以必定滞后一拍或者若干拍；而前馈是本质主动的，可以在偏差还在萌芽阶段、还没有成气候的时候就消灭之。

![](https://pic3.zhimg.com/v2-818559257647e9b2ea72c16215994a32_b.jpg)

图 8 - 换热器的前馈控制方案

前馈控制有两个重要因素：前馈增益（已知扰动对被控变量的影响）和扰动动态（扰动到被控变量产生影响的过程）。如果可以精确知道这这个因素，那前馈补偿可以把可测扰动完全补偿掉。但实际上很难精确测量到相关数据，指望前馈来完全补偿是不靠谱的。因此，可考虑**同时使用前馈和反馈控制**，也就是在反馈回路上再加一个前馈，用前馈抵消掉可测扰动的大部分影响，再由反馈来弥补剩余的误差，避免前馈模型误差造成的过度补偿。

**前馈控制，需要研究被控对象的内在机理**。对于策略同学来说，**业务敏感度非常重要，其本质也就是在理解信贷业务的规律**。而培养业务敏感度的关键是多经历不同场景，在项目实践中成长。经历得多，知道得多。可有意识地从以下几个维度去加强策略思维：

| 影响因素 | 培养方法                                                                |
| ---- | ------------------------------------------------------------------- |
| 政策法规 | 金融行业始终是处于监管的前线。国内信贷行业，特别是互联网金融行业一直处于快速发展阶段，政策变化快。要多关注法律法规政策，理解政策精神。 |
| 经济环境 | 信贷本质仍是金融，离不开经济周期的影响。例如，新冠疫情对市场环境的影响。                                |
| 渠道流量 | 不同场景（如电商、内容、旅游等）的客群存在着风险差异，接触不同渠道的流量，理解沉淀不同客群画像。                    |
| 市场环境 | 在反欺诈中，反欺诈调研主要负责风险事件调研，这就是通过收集信息了解行业风险。这也是一种了解客群的方法。                 |

根据以上方法培养业务意识，学会预判风险，提前调整风控策略，这就能将风险转移到其他平台。例如，在行业 24% 利率收缩，我们提前收紧授信和交易策略，拒绝高风险客户，主动给客户降价。而与此同时，如果有些机构并没有觉察到这一风险，则很可能变成其他机构的 "接盘侠"。

除了理解业务本身，还需要理解客户流量。风控最为核心是流量和数据，流量是天花板，数据是电梯。例如，在冷启动阶段时，我们可能会和上游资产方要求一批测试样本，进行撞库分析得到客群画像。比如，**学历组成、性别组成、多头分布、地域组成**等。

前馈控制还有一个特殊情况。通常驱动前馈的是一个连续变量，比如可测的扰动流量、多头分布。但有时候，扰动是由一个特定事件触发的，等到风险逾期率等常规测量值反映出来的时候，为时已晚。此时，借助业务敏感度提前收紧一些规则，对于风控至关重要。

![](https://pic4.zhimg.com/v2-778d241fac8fd8411b1113f945f6a58b_b.jpg)

图 9 - 信贷资产的前馈&amp;amp;amp;amp;amp; 反馈风控方案

如图 9 所示，这是信贷资产前馈 & 反馈风控系统，其相当于反馈风控系统多了一个前馈补偿模块。从前馈控制角度看，由于增加了反馈控制，降低了对前馈控制模型精度的要求，并能对没有测量的干扰信号的扰动进行校正。从反馈控制角度看，前馈控制作用对主要干扰及时进行粗调，大大减少反馈控制的负担。

**前馈控制属于开环控制**，其缺点也显而易见，其无法得到实际输出的反馈信息。例如，某多头数据商因为在某个时点接入机构数明显变多，导致进件客群上观测到的多头指标相对于之前明显偏高。风控策略人员通过监控多头变量的均值发现了这一现象，此时若按当前的策略规则阈值（例如，拒绝规则为 "**最近 3 个月的多平台申请次数大于 10 次，则拒绝，否则通过**"），则会导致通过率明显下降。为了维持通过率不变，规则放松，阈值将提高到"**最近 3 个月的多平台申请次数大于 12 次，则拒绝，否则通过**"。这就是典型的前馈控制，对进件流量进行特性分析来进行相应补偿。

但是，我们无法知道多头指标上升是否完全是因为 "接入机构数变多" 这个因素引起，而不是资产恶化？所以单靠前馈控制是不可靠的，风险可能会因此爆了。此时，我们使用负反馈控制对其进行弥补，即**拿近期有表现样本开发风险模型，加入到风控规则集中进行补充**。

![](https://pic3.zhimg.com/v2-42ab08c6ba9230a46ab7ff4bc33989aa_b.jpg)

图 10 - 多头数据的测量不完全性

## Part 4. 自适应控制

自适应控制（Adaptive Control）是指根据控制对象本身参数或周围环境的变化，自动调整控制器参数以获得满意性能。

![](https://pic4.zhimg.com/v2-40ef7e4f26e514b743ea71462fe54ed7_b.jpg)

图 11 - 信贷资产的自适应反馈风控系统

借鉴自适应控制的思想，我们可在信贷风控系统中采用以下方案。

**（1）冠军挑战机制**

我们可能会同时上线多个模型（或策略），分流量尾号测试对比效果差异。这被称为**冠军挑战机制**，或者**AB 测试**。如果把这 3 个策略当作控制器中配置的规则，比较这 3 个策略之间的优劣，内部只是通过分流优化（相当于参数调整），把更多的流量从策略 R1 切换到了策略 R2，就可以实现自适应调整。

![](https://pic2.zhimg.com/v2-4f9f7103394a85bfd4c172906313794d_b.png)

图 12 - 冠军挑战机制

**（2）模型在线学习**

模型分数在风控规则中起到重要作用，剖开决策引擎，你可能会发现目前影响力度越大的规则基本都是模型分 + 一些单变量。单变量存在决策空间的原因是，模型是起到一个基准的作用，其无法覆盖到所有的风险案件，在当前客群上适配能力下降，从而留出了优化空间。那么是否能够加快模型迭代速度，使得模型能始终占据足够的决策空间？因此，有人提出在线学习，**取最新风险 Y 和最新样本来迭代模型，并自动上线部署。** 当然，这就 AutoML、数据管理、模型部署平台等基础建设提出了很高的要求。

![](https://pic3.zhimg.com/v2-a70383ce63d7835e3b41be429e35aa66_b.jpg)

图 13 - 模型分数与其他变量相辅相成

## Part 5. 总结

本文希望从自动控制理论的角度来解释一些信贷风控系统设计的原理。除了本文提到的负反馈、前馈、前馈 & 负反馈、自适应控制外，还有串级控制等。跨学科的碰撞，将会迸发一些不一样的火花。

## **致谢**

所有参考资料中的各位作者，感谢给我的启发。文中仍有理解不到位之处，在此抛砖引玉。

## **版权声明**

**欢迎转载分享**，**请在文章中注明作者和原文链接，感谢您对知识的尊重和对本文的肯定。** 

> 原文作者：求是汪在路上（知乎 ID）  
> 原文链接：[https://zhuanlan.zhihu.com/p/149978781/](https://zhuanlan.zhihu.com/p/149978781/)

著作权归作者所有。**商业转载请联系作者获得授权，非商业转载请注明出处，侵权转载将追究相关责任**。

## **参考资料**

* * *

## **关于作者**：

在某互联网金融公司从事风控建模、反欺诈、数据挖掘等方面工作，目前致力于将实践经验固化分享，量化成长轨迹。欢迎交流 
 [https://zhuanlan.zhihu.com/p/149978781](https://zhuanlan.zhihu.com/p/149978781)
